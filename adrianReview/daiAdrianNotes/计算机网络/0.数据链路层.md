TCP/IP四层模型

# 网络接口层

​		TCP/IP四层模型中的网络接口层可以对应为OSI七层模型的物理层和数据链路层



## 物理层

​		物理层主要是用来连接不同的设备和传输比特流

### 信道

​		信道是指往一个方向传送信息的媒体，一个通信信路包含一个接收信道和一个发送信道

​		信道通常可分为**单工通信信道**、**半双工通信信道**和**全双工通信信道**

- 单工通信信道
  - 只能往一个方向通信，没有反方向的回馈信道
  - 有线电视，无线电收音机等
- 半双工通信信道
  - 双方都可以发送和接收信息，但是双方无法同时进行发送或者接收
- 全双工通信信道
  - 双方都可以同时接收或者发送信息



分用-复用技术

​		因为点对点的信息对信道的利用率不高，通过分用-复用技术能够有效的提高信道的利用率，但是也同时会带来信道拥塞的问题

​		主要的技术有：频分复用，时分复用，波分复用，码分复用



## 数据链路层

​		数据链路层主要是将需要传输的数据**封装成帧**

- 帧是数据链路层数据的基本单位
- 发送端在网络层的一段数据前后都添加特定的标记从而使数据变成 “帧”
  - 在IP数据包的前后添加帧首部和帧尾部
  - 帧的首部和帧的尾部都是特定的控制字符（特定的比特流）
- 接收端根据前后的特定标志识别出 “帧”



### 透明传输

![透明传输](images\透明传输.png)

​		因为帧首部和帧尾部都是特定的bit流，那么就有可能在IP数据报中存在控制字符，这个时候就需要数据链路层对数据帧进行处理了；<font color=red>对数据帧的特殊处理（加转义字符）就是透明传输</font>，也就是在控制字符的前面加上一个转义含义的 bit（ESC）

- 帧首部：SOH（00000001）
- 帧尾部：EOT（00000100）



### 差错监测

​		因为物理层只管传输比特流，无法控制数据是否出错。那么数据链路层需要负责起监测传输的比特流是否有错误

​		常用的监测方式有：奇偶检验码和循环冗余校验码CRC



#### 奇偶校验码

比如一个数据帧： 00110001

1. 在发送端进行奇偶校验之后，0+0+1+1+0+0+0+1 = 3

2. 在数据帧最后加上一个 1 （如果相加是偶数，那么就在最后加 0）

3. 到达目的计算机，该计算机会对这个数据做同样的处理，如果数据帧最后的奇偶校验位是相同的话；那么就说明数据时正确的



​		此时会出现一个问题，就是当数据帧出错的时候，本来是 00110001，出错之后变成了 00000001 ；此时这两个数据帧的奇偶校验位都是 1 ，目的计算机就无法监测出这个数据帧是出错的了



#### 循环冗余校验码CRC

1. 首先选定一个用于校验的多项式 G(x)，并在数据尾部添加 r 个0
2. 添加0之后的数据，使用 模 “2” 除法 （异或操作）除以多项式的位串
3. 得到的余数填充在原数据r个0的位置得到可校验的位串

![CRC1](images\CRC1.png)



待补充。。。。



### 最大传输单元MTU

​		最大传输单元MTU（Maximum Transmission Unit）；数据链路层的数据帧长度受到MTU的限制，而且<font color=red>**数据帧过大或者过小都会影响传输的效率**</font>；<font color=green>**以太网的MTU一般是1500字节**</font>

​		一条数据链路可能会经过很多个小型网络，每个路径上的MTU都有可能不一致，所以一条路径上的MTU由路径上最小的MTU所决定（也就是木桶的木板效应）

> - 数据帧过小，会导致一个很长的数据比特流需要传输很多次才能传输完成
> - 数据帧过大，那么4个时延都会变得很长，总时延也就变得更长了



### 以太网协议

​		以太网（Ethernet）是一种广泛使用的<font color=red>**局域网**</font>技术；以太网是应用于数据链路层的协议，可以完成<font color=blue>**相邻设备之间**</font>的数据帧传输



#### MAC地址

​		MAC地址是指设备的物理地址（或者叫硬件地址），每一个设备都拥有唯一的一个MAC地址。<font color=red>MAC地址一共是 48 位，使用 16 进制表示</font>

> 查看电脑的MAC地址：ipconfig /all
>
> 其中物理地址栏的内容就是相应硬件的MAC地址


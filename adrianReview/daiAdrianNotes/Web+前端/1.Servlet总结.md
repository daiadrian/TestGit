Servelt 总结

### Servlet生命周期

Servlet的生命周期分为5个阶段：加载、创建、初始化、处理客户请求、卸载。

1. 加载：容器通过类加载器使用servlet类对应的文件加载servlet
2. 创建：通过调用servlet构造函数创建一个servlet对象
3. 初始化：调用init方法初始化，**这个方法是在Servlet已经被创建，但在向客户端提供服务之前调用**
4. 处理客户请求：Servlet创建后就可以处理请求，当有新的客户端请求时，Web容器都会**创建一个新的线程**来处理该请求。接着调用Servlet的`Service()`方法来响应客户端请求（Service方法会根据请求的method属性来调用`doGet()`和`doPost()`）
5. 卸载：**容器在卸载Servlet之前**需要调用destroy()方法，让Servlet释放其占用的资源

### Servlet不是线程安全的

​		Servlet在多线程下其本身并不是线程安全的；如果在类中定义成员变量，而在service中根据不同的线程对该成员变量进行更改，那么在并发的时候就会引起错误

> ​		最好是在方法中，定义局部变量，而不是类变量或者对象的成员变量。由于方法中的局部变量是在栈中，彼此各自都拥有独立的运行空间而不会互相干扰，因此才做到线程安全
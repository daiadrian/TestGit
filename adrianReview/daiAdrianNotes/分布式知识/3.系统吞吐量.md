# 系统吞吐量

## 概念

应用系统每秒钟最大能接受的用户访问量。或者每秒钟最大能处理的请求数。

系统吞吐量的几个重要指标分别是：TPS(QPS)、并发量、响应时间



## TPS（吞吐量）

​		TPS：每秒钟处理完的事务次数，一般TPS是对整个系统来讲的

​		一个应用系统一秒能完成多少事务处理，一个事务在分布式处理中，可能会对应多个请求，对于衡量单个接口服务的处理能力，用QPS比较多

​		吞吐量是指系统在单位时间内处理请求的数量。通常用吞吐量作为并发系统的性能指标。对于没有并发的系统而言，吞吐量就是响应时间的倒数

​		对于一个有并发的系统，如果只有一个用户使用时系统的平均响应时间是 t，当有 n 个用户使用时，每个用户看到的响应时间通常并不是 n×t ，而往往比 n×t 小很多（当然，在某些特殊情况下也可能比n×t大，甚至大很多）。这是因为在处理单个请求时，在每个时间点都可能有许多资源被闲置，当处理多个请求时，如果资源配置合理，每个用户看到的平均响应时间并不随用户数的增加而线性增加

​		实际上，不同系统的平均响应时间随用户数增加而增长的速度也不大相同，这也是采用吞吐量来度量并发系统的性能的主要原因。一般而言，吞吐量是一个比较通用的指标，两个具有不同用户数和用户使用模式的系统，如果其最大吞吐量基本一致，则可以判断两个系统的处理能力基本一致



## QPS

​		QPS（每秒查询率）：每秒钟处理完请求的次数；注意这里是处理完。具体是指发出请求到服务器处理完成功返回结果

QPS是对一个特定的查询服务器在规定时间内所处理流量多少的衡量标准

- QPS = 并发量 / 平均响应时间
- 通常QPS用来表达和衡量当前系统的负载
- 对应 fetches/sec，即每秒的响应请求数，也即是最大吞吐能力



## 并发量

> 并发量：系统能同时处理的请求数

​		并发量指系统可以同时承载的正常使用系统功能的用户的数量。对于网站系统一般会有三个关于用户数的统计数字：注册用户数、在线用户数和同时发请求用户数



## 响应时间（RT）

响应时间（RT）：指系统对请求作出响应的时间（通常指处理一次请求所需要的平均处理时间）

- 它完整地记录了整个计算机系统处理请求的时间
- 响应时间的绝对值并不能直接反映软件的性能的高低，软件性能的高低实际上取决于用户对该响应时间的接受程度



## 各个吞吐量之间的计算关系

- QPS = 并发量 / 平均响应时间
- 并发量 = QPS * 平均响应时间
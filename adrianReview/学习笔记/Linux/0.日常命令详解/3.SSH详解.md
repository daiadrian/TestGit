### SSH概念

​		Secure Shell（SSH） 是由 IETF 制定的建立在应用层基础上的安全网络协议。它是专为远程登录会话和其他网络服务提供安全性的协议，可有效弥补网络中的漏洞

​		通过SSH，可以把所有传输的数据进行加密，也能够防止DNS欺骗和IP欺骗。还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度



### SSH安全机制

​		SSH之所以能够保证安全，原因在于它采用了**<font color=red>非对称加密技术（RSA）</font>**加密了所有传输的数据。SSH提供两种级别的认证方式：

- <font color=blue>基于口令的安全验证</font> 
  - 只要知道目标机器的帐号和口令，就可以登录到远程主机
  - 所有传输的数据都会被加密
  - 但是不能保证你正在连接的服务器就是你想连接的服务器；可能会有别的服务器在冒充真正的服务器，也就是受到 “中间人攻击” 这种方式的攻击
- <font color=blue> 基于密钥的安全验证 </font>
  - 首先必须为自己创建一对密钥，并把公钥放在需要访问的服务器上
  - 如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密钥进行安全验证
  - 服务器收到请求之后，先在该服务器上你的主目录下寻找你的公钥，然后把它和你发送过来的公钥进行比较
  - 如果两个密钥一致，服务器就用公钥加密 “质询”(challenge) 并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私钥在本地解密再把它发送给服务器完成登录



### SSH的使用

1. 口令登录

   ```shell
   #格式： ssh 用户名@服务器ip地址
   ssh root@47.107.169.204
   #连接之后需要输入密码进行登录
   ## 注意，使用ssh默认是登录远程服务器的22号端口，需要指定端口的要带上参数 -p
   ##登录后可以通过 exit/logout 退出远程登录
   ```

   

2. 公钥登录

   - 如果要用公钥登录远程服务器：
     - 首先需要在当前服务器生成公钥和秘钥
     - 然后将当前服务器的公钥复制到远程服务器上

   ```shell
   #在当前服务器生成密钥对
   #-t表示类型选项，这里采用rsa加密算法
   ssh-keygen -t rsa   
   
   ## 执行结束以后会在 /home/当前用户 目录下生成一个 .ssh 文件夹
   ### 其中包含私钥文件 id_rsa 和公钥文件 id_rsa.pub
   
   
   #将公钥复制到远程主机中
   ssh-copy-id root@47.107.169.204
   ssh-copy-id -i id_rsa.pub 47.107.169.204
      
   ##后续直接通过 ssh root@47.107.169.204 即可免密登录远程主机
   ```

   

   
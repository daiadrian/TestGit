## JDBC面试题

### JDBC操作数据库步骤

1. 注册数据库驱动
2. 建立数据库连接
3. 创建一个Statement
4. 执行SQL语句
5. 处理结果集
6. 关闭数据库连接

```java
Connection connection = null;
Statement statement = null;
ResultSet resultSet = null;

try {
    Class.forName("com.mysql.jdbc.Driver");
    //获取与数据库连接的对象-Connetcion
    connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/dai", "root", "root");
    //获取执行sql语句的statement对象
    statement = connection.createStatement();
    //执行sql语句,拿到结果集
    resultSet = statement.executeQuery("SELECT * FROM users");
    //遍历结果集，得到数据
    while (resultSet.next()) {
        System.out.println(resultSet.getString(1));
        System.out.println(resultSet.getString(2));
    }
} catch (Exception e) {
    e.printStackTrace();
} finally {
    if (resultSet != null) {
        try {
            resultSet.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    if (statement != null) {
        try {
            statement.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
    if (connection != null) {
        try {
            connection.close();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }
}
```



### Statement和PreparedStatement的区别

- PreparedStatement是预编译的SQL语句，效率高于Statement
- PreparedStatement可以防止SQL注入，安全性高于Statement
- PreparedStatement支持 ? 操作符，相对于Statement更加灵活
- CallableStatement适用于执行存储过程



### 数据库连接池工作原理和实现方案

#### 工作原理

1. 服务器启动时会建立一定数量的池连接，并一直维持不少于此数目的池连接

2. 客户端程序需要连接时，连接池驱动程序会返回一个未使用的池连接并将其表记为忙

3. 如果当前没有空闲连接，连接池驱动程序就新建一定数量的连接，新建连接的数量由配置参数决定
4. 当使用的连接调用完成后，连接池驱动程序将此连接表记为空闲，其他调用就可以使用这个连接



#### 实现方案

​		连接池使用集合来进行装载，返回的 Connection **是原始 Connection 的代理**，代理Connection的close方法，当调用close方法时，不是真正关连接，而是把它代理的 Connection 对象放回到连接池中，等待下一次重复利用



### DriverManager是用来做什么的

- JDBC的DriverManager是一个**工厂类**，我们**通过它来创建数据库连接**
- 当JDBC的Driver类被加载进来时，它会自己注册到DriverManager类里面
- 然后我们会把数据库配置信息传成 DriverManager.getConnection() 方法**，DriverManager会使用注册到它里面的驱动来获取数据库连接，并返回给调用的程序**



## Mybatis面试题

### `#{}和${}`的区别是什么

- `#{}`解析传递进来的参数数据
- ${}对传递进来的参数**<font color=blue>原样拼接</font>**在SQL中
- **#{}是预编译处理，${}是字符串替换**
- 使用 `#{}` 可以有效的防止SQL注入，提高系统安全性


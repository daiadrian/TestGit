数据库面试题汇总

## ALL函数

ALL：父查询中的结果集大于子查询中每一个结果集中的值，则为真

> S(SID ，SN，SEX，AGE，DEPT)
>
> C(CID ，CN)
>
> SC(SID ，CID，GRADE)
>
> 其中：SID为学号，SN为姓名，SEX为性别，AGE为年龄，DEPT为系别，CID为课程号，CN为课程名，GRADE为成绩。
>
> 检索选修课程“C2 ” 的学生中成绩最高的学生的学号

````mysql
SELECT SID FORM SC 
WHERE CID=“C2” AND GRADE＞＝ALL(SELECT GRADE FORM SC WHERE CID=“C2”)
````



## 批量往mysql导入1000万数据有什么方法

> 如果1千万条数据一条条插入，肯定会长达几个小时非常慢，优化数据库插入性能是很有意义的
>
> 先不谈什么分库分表设置数据库什么缓存参数；仅仅针对开发层面优化

### 核心要点

1. 减少 IO 次数
2. SQL 优化
3. 合理设置批量插入的大小
4. 尽量顺序插入

### 实际应用

1. 一条SQL语句插入多条数据    
2. 在**事务中进行插入处理**，<font color=red>切记不要1条数据提交一下，肯定要分批处理</font>
3. 数据有序插入，是为了减少索引的维护压力

**总结：**

1. 合并数据 + 事务 + 有序数据的优化插入方式
2. 注意SQL批量插入的大小必须合理
3. 事务执行时间不要太长了
4. 实际开发时需要合理设置MYSQL相应配置参数，增加缓存或减少不必要日志磁盘读写